### 4.2 具体例：タスク管理アプリケーションの開発

実際のタスク管理アプリケーション開発を例に、セクション4.1で説明した開発フローをどのように適用するかを具体的に示します。

#### 要件定義・設計フェーズ

まず、タスク管理機能の設計をAIに相談します：

```
「Spring Bootを使用したタスク管理アプリケーションで、以下の要件を実現するための設計案を提案してください：

要件：
- ユーザーごとのタスク管理
- タスクの作成、取得、更新、削除機能
- タスクのステータス管理（TODO、進行中、完了）
- 優先度設定機能

考慮すべき点：
- RESTful APIの設計
- データベース設計（エンティティの関係）
- Spring Security による認証・認可
- 将来的な機能拡張への対応

技術スタック: Spring Boot 3.x, Spring Data JPA, MySQL」
```

このプロンプトにより、全体的なアーキテクチャとエンティティ設計の方向性を決定できます。

#### 実装フェーズ

**Step 1: スケルトン作成**

まず、Taskエンティティとサービスクラスの基本構造を作成します：

```
「以下の仕様に基づいて、Spring BootアプリケーションのTaskエンティティクラスとTaskServiceクラスのスケルトンを作成してください。

Taskエンティティの仕様：
- id (Long型、主キー、自動生成)
- title (String型、必須、最大100文字)
- description (String型、任意、最大500文字)
- status (ENUM型: TODO, IN_PROGRESS, DONE)
- priority (ENUM型: LOW, MEDIUM, HIGH)
- dueDate (LocalDateTime型、任意)
- createdAt (LocalDateTime型、自動設定)
- updatedAt (LocalDateTime型、自動更新)
- userId (Long型、外部キー)

TaskServiceクラスの要件：
- TaskRepositoryを依存性注入
- createTask、getTaskById、getAllTasksByUserId、updateTask、deleteTaskメソッドのシグネチャのみ定義
- 各メソッドには実装予定の処理内容をTODOコメントで記載

JPAアノテーション、Bean Validationアノテーションを適切に設定してください。」
```

**Step 2: 段階的実装**

スケルトンが完成したら、具体的なメソッドの実装を依頼します：

```
「先ほど作成したTaskServiceクラスのcreateTaskメソッドの実装を追加してください。

要件：
- TaskCreateRequestDTO（title, description, priority, dueDate, userId）を引数として受け取る
- バリデーション: titleが空でないこと、userIdが存在すること
- 新しいTaskエンティティを作成し、statusをTODOに初期設定
- createdAt、updatedAtを現在時刻に設定
- repositoryを使用してデータベースに保存
- 保存されたTaskエンティティをTaskResponseDTOに変換して返却

TaskCreateRequestDTOとTaskResponseDTOクラスも合わせて作成してください。
@Valid、@NotBlankなどの適切なバリデーションアノテーションを使用してください。」
```

**Step 3: エッジケース対応**

基本実装が完了したら、エラーハンドリングを追加します：

```
「createTaskメソッドに以下のエラーハンドリングを追加してください：

エラーケース：
- userIdが存在しないユーザーの場合 → UserNotFoundExceptionをスロー
- titleがnullまたは空文字列の場合 → ValidationExceptionをスロー
- dueDateが過去の日付の場合 → InvalidDateExceptionをスロー
- データベース保存時にエラーが発生した場合 → DataAccessExceptionをキャッチしてTaskCreationExceptionをスロー

各カスタム例外クラスも作成してください。
例外発生時には適切なログ出力も追加してください。」
```

#### レビュー・改善フェーズ

実装完了後、コード品質の向上を図ります：

```
「以下のTaskServiceクラスのcreateTaskメソッドをレビューして、改善点を指摘してください：

[実装されたコード]

特に以下の観点で：
- セキュリティ: SQLインジェクション対策、認可チェック
- パフォーマンス: 不要なデータベースアクセス、N+1問題
- 可読性: メソッド名、変数名の適切性
- テスタビリティ: 単体テストの書きやすさ
- Spring Bootのベストプラクティス: アノテーションの使い方、DI設計」
```

このように段階的にAIを活用することで、要件から実装、エラーハンドリング、コードレビューまでの一連の開発フローを効率的に進めることができます。各ステップで具体的で詳細なプロンプトを使用することが、期待する品質のコードを得るための重要なポイントです。