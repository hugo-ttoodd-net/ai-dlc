# AI駆動開発: 上流工程のプロンプト利用ガイド

## このガイドについて
このドキュメントは、開発チームが日常の開発業務で AI（例: MS 365 Copilot, ChatGPT, Devin など）を効果的に活用するためのプロンプトテンプレートの利用方法をまとめたものです。  
テンプレートは以下の3フェーズで構成され、AI駆動開発ライフサイクルを通じて、**要件定義 → バックログ作成 → ユーザーストーリーリファインメント（詳細化）** をスムーズに行うことを目的としています。  

- **01-要件定義プロンプト**: 会議の内容や資料を整理し、ソフトウェア要件として明文化する  
- **02-バックログ作成プロンプト**: 要件をエピック・フィーチャー・ユーザーストーリーに分解し、プロダクトバックログを生成する  
- **03-ユーザーストーリーリファインメントプロンプト**: バックログに登録されたストーリーをリファインメントし、実装・テストに直結するレベルに整える  

このガイドを使うことで、チームは「AIから良いアウトプットを得るために、どのタイミングで、どのようにテンプレートを活用すべきか」を理解できるようになります。  

---

## 背景
近年、ソフトウェア開発においては **生産性の向上、開発速度の加速、イノベーション促進、短いリードタイムでの市場投入、開発者体験の改善** が大きなテーマとなっています。  
従来の開発手法では、POや開発者が多くの時間を会議・計画・文書化といった「付随的な作業」に費やしており、AIを単なる補助ツールとして導入しても大きな改善にはつながりませんでした。  

そのため、AIを「アシスタント」ではなく **開発チームの中心的なコラボレーター** として位置付け、開発ライフサイクル全体に組み込むことが重要になっています。  

これにより、以下のメリットが得られます:  
- 開発速度の向上（Velocity）  
- イノベーション促進（Innovation）  
- 品質向上（Quality）  
- 開発者体験の改善（Developer Experience）  

この考え方を取り入れ、AIを活用して **要件定義・バックログ作成・ユーザーストーリーリファインメント** を効率化する仕組みとして本プロンプトテンプレートを策定しました。  
本ガイドは、開発チームがこの仕組みを理解し、日常的に活用できるようにまとめられたものです。

## MCPサーバーとの関係
AIテンプレートの出力結果は、MCPサーバー経由で Azure DevOps (ADO) に登録可能です。
これにより「AIの出力 → チームレビュー → ADO反映」という流れが自動化され、手作業での転記を最小化できます。

---

# 01- 要件定義プロンプト
## テンプレートの概要
要件定義フェーズは、AI駆動開発ライフサイクルの最初のステップであり、**「何を作るのか」「なぜ作るのか」** を明確にする重要なプロセスです。  
この段階で顧客やステークホルダーから出てきたアイデアや要望を、そのまま「メモ」や「議事録」として残してしまうと、後続の開発プロセスで解釈のズレや認識違いが発生します。  

そこでこのテンプレートを使うことで、会議のトランスクリプトや資料を **AIが整理・変換** し、  
- 要件を「機能要件」「非機能要件」「期待される価値」に分解  
- 曖昧な点を「確認が必要な事項」として明示  

そうすることにより、**後続のバックログ作成やユーザーストーリー化に直接使えるフォーマットされた情報** にまとめることができます。  
つまりこのフェーズは、AI駆動開発の「土台作り」であり、ここを正しく行うことで後工程の効率と品質が大きく変わります。  

---

## フェーズ
- 要件定義フェーズ

---

## 使用タイミング
- 事業部(ステークホルダーやPO)との会議終了後  
- 会議でのディスカッションを「ソフトウェア要件」として残す必要があるとき  
- バックログ化に進む前に、要求と価値を整理したいとき  

---

## テンプレートの構成と解説

### 【ゴール・目的】
- この部分には「この要件定義で達成したいこと」を明確に記載します。  
- なぜ重要か？ → ゴールが曖昧だとAIが的外れな要件を出してしまうため。  
- 例: 「顧客がオンラインで商品を購入できるようにする機能の要件を整理する」  

---

### 【あなた、AIとしての役割】
- AIに「どう振る舞ってほしいか」を伝える指示。  
- ここでは「POを支援する立場で会議の発言を要件に変換する」ことを定義しています。  
- なぜ重要か？ → AIが「要件整理」と「価値の明確化」に集中でき、余計な情報に引っ張られないようにするため。  

---

### 【私、チームメンバーとしての役割】
- AIが出力した要件をそのまま使うのではなく、必ず「レビューと補足」をすることを明記。  
- なぜ重要か？ → AIは万能ではなく、技術的な制約やドメイン特有の知識を補うのはチームの役割だから。  
- このプロセスを経ることで「AI＋人間」のハイブリッドで精度を高めることができる。  

---

### 【コンテキスト】
- プロジェクトの背景や利用する資料（会議トランスクリプト、PPT、Excelなど）を記載。  
- なぜ重要か？ → コンテキストを与えることで、AIが会話や資料を「どの前提で解釈するべきか」を理解しやすくなる。  
- 例: 「この会議は新しいサブスクリプション機能追加に関する議論である」  

---

### 【アウトプットのフォーマット】
- AIに「どんな形で出力してほしいか」を指定する部分。  
- セクション構成：  
  1. 背景と目的 → 会議のゴールや前提  
  2. ビジネス課題・期待価値 → 価値視点を明示  
  3. 機能要件 → 具体的な機能のリスト  
  4. 非機能要件 → 性能、セキュリティ、信頼性など  
  5. 制約条件・前提 → 予算、スケジュール、利用技術など  
  6. 確認が必要な事項 → 曖昧な点やPOに聞くべき内容  

- なぜ重要か？ → フォーマットを決めておくことで、AIがブレずに構造化出力でき、後続工程でそのまま流用可能になる。  

---

### 【入力と参考情報・資料の添付】
- 会議の文字起こしや資料をここに貼り付ける。  
- なぜ重要か？ → AIは参照データが多いほど精度が上がるため。  

---

## 活用上の注意点
- 会議直後に使うと、議論が新鮮なうちに要件化できる。  
- 曖昧な表現は必ず「確認が必要」としてリスト化すること。  
- 出力を「そのまま」使うのではなく、必ずチームレビューを挟むこと。  

---

## 活用の流れ
1. ステークホルダー会議を実施 → 録画・トランスクリプト化  
2. 資料と一緒にテンプレートに入力  
3. AIに要件定義サマリーを生成させる  
4. チームでレビュー・修正  
5. **次フェーズ（バックログ作成）に引き渡す**

---

# 02- バックログ作成プロンプト

## テンプレートの概要
バックログ作成フェーズは、要件定義で整理された内容を**開発チームが実際に使えるプロダクトバックログに変換する重要なステップ**です。  
この段階では、要件を「エピック → フィーチャー → ユーザーストーリー」に分解し、さらにそれぞれに **顧客へのメリット** と **ビジネス価値** を紐づけることで、チーム全体が「なぜこの機能を作るのか」を理解しやすくなります。  

また、ユーザーストーリーごとに **Acceptance Criteria（受け入れ条件）** を設定することで、開発とテストが同じ基準で進められるようになります。  
このプロセスを踏むことで、AIから出力された要件をプロダクトバックログとして整理し、開発に進むための基盤を整えることができます。
ただし、この時点のユーザーストーリーはまだ初期レベルであり、実際に開発へ着手する前にはリファインメントによる詳細化が必要です。

---

## フェーズ
- プロダクトバックログ作成

---

## 使用タイミング
- 要件定義サマリーが完成した直後  
- 新しい機能や改善項目をバックログに追加する必要があるとき  
- スプリント計画の準備段階で、開発可能な単位に要件を分解したいとき  

---

## テンプレートの構成と解説

### 【ゴール・目的】
- 要件を構造化されたプロダクトバックログに変換すること。  
- なぜ重要か？ → バックログが整理されていないと、スプリント計画で混乱が生じ、顧客価値に沿った優先順位付けができなくなるため。  

---

### 【あなた、AIとしての役割】
- AIはプロダクトオーナーを支援し、要件定義サマリーや技術メモを分析してバックログを生成します。  
- ユーザーストーリーを適切な粒度に落とし込みつつ、顧客メリットとビジネス価値を明確にします。  
- 不明確な点は「追加検討が必要」と明示します。  
- なぜ重要か？ → AIに期待する具体的な役割を与えることで、出力が一貫性のあるバックログになります。  

---

### 【私、チームメンバーとしての役割】
- AIが出力したバックログをレビューし、技術的制約や実装方法を補足します。  
- 不足している情報やリスクを追記し、POや事業部と確認すべき点を明確にします。  
- なぜ重要か？ → バックログは「AIだけでは完成しない」。必ずチームが最後に責任を持って完成させる必要があるため。  

---

### 【コンテキスト】
- 要件定義サマリーをもとに作成することを明示。  
- 開発チームからの補足（利用フレームワーク、DB設計、外部サービス連携など）が必要。  
- なぜ重要か？ → コンテキストを示すことで、AIが「どの前提でバックログを組み立てるか」を理解しやすくなる。  

---

### 【アウトプットのフォーマット】
- 表形式で出力し、以下を含めます：  
  1. エピック  
  2. フィーチャー  
  3. ユーザーストーリー  
  4. 顧客へのメリット  
  5. ビジネス価値  
  6. Acceptance Criteria（Given-When-Then形式）  

- なぜ重要か？ → この形式を守ることで、後続の「ユーザーストーリー詳細化」フェーズにスムーズに進める。  

---

### 【入力と参考情報・資料の添付】
この部分は非常に重要です。AIに良いバックログを作らせるためには、**ビジネス視点と技術視点の両方**を入力する必要があります。  

- **事業部からの入力**  
  - 顧客が求める機能や価値に関する資料（PPT、要望リスト）  
  - 会議のトランスクリプト（「なぜこの機能が必要か」を説明している部分が特に重要）  
  - ビジネス上の制約（予算、スケジュール、優先度）  

- **開発チームからの入力**  
  - 技術的前提（利用フレームワーク、DB設計、インフラ要件）  
  - 実装に関する補足情報（外部サービス連携、API仕様、セキュリティ要件）  
  - 技術的リスクや注意事項  

**なぜ重要か？**  
→ 事業部側の情報だけでは「何を作るか」は分かるが「どう作るか」が抜ける。  
→ 開発側の情報だけでは「どう作れるか」は分かるが「なぜ作るか」が抜ける。  
両方を揃えることで、AIが「価値を提供でき、かつ実現可能なバックログ」を生成できる。  

---

## 活用上の注意点
- Acceptance Criteria は必ず **Given-When-Then形式** で記述する。  
- 「ユーザーストーリーの粒度」が大きすぎると、次工程で分割の手間が増えるため、なるべく実装単位に落とす。  
- 不明点は必ず「追加検討が必要」として残し、POや事業部と確認する。  

---

## 活用の流れ
1. 要件定義サマリーと参考資料を準備  
2. 事業部（価値・顧客視点）と開発チーム（実装視点）の両方から情報を集める  
3. AIにプロンプトを入力し、プロダクトバックログを生成  
4. チームでレビュー・修正し、POと合意  
5. **ユーザーストーリープロンプト**に渡して詳細化へ  

---

# 03- ユーザーストリーリファインメントプロンプト

## テンプレートの概要
ユーザーストーリーリファインメント（詳細化）フェーズは、バックログに登録された初期のユーザーストーリーを、**実装可能なレベルに具体化する重要なステップ**です。  
この段階で必要な情報を揃えておくことで、開発チームはすぐに実装・テストに着手できるようになります。  

さらに、このテンプレートの成果物は **AIによる自動コード生成ツール（例: Devin）** の入力としても利用されるため、単なる文章ではなく **実装に直結する粒度の要件** をまとめることが求められます。  

---

## フェーズ
- AI駆動開発ライフサイクルの **ユーザーストーリーリファインメントフェーズ**

---

## 使用タイミング
- バックログに登録されたユーザーストーリーを、スプリントに投入する直前  
- 実装やテストを開始する前に、具体的なルール・UI設計・技術的制約を明確にしたいとき  

---

## テンプレートの構成と解説

### 【ゴール・目的】
- ユーザーストーリーを実装可能なレベルに詳細化すること。  
- なぜ重要か？ → 曖昧なユーザーストーリーでは、開発中に解釈違いや手戻りが発生しやすくなるため。  

---

### 【あなた、AIとしての役割】
- AIはストーリーリファインメントAIとして、与えられたユーザーストーリーを分析・補完する。  
- 欠落している要素（ビジネスルール、UI、技術的制約、未確定事項）を補足して提示。  
- Acceptance Criteria を **Given-When-Then 形式**で具体化し、テスト可能な粒度に落とし込む。  
- なぜ重要か？ → AIに「詳細化」と「欠落補完」の役割を与えることで、開発直結のアウトプットが得られる。  

---

### 【私、チームメンバーとしての役割】
- AIが出力したユーザーストーリーをレビューし、技術的視点や業務知識を加える。  
- 特に **UI設計、外部システム連携、セキュリティ制約** など、AIが自動生成しきれない情報を追記する。  
- Acceptance Criteria が十分なカバレッジを持つか確認（正常系・異常系の両方）。  
- なぜ重要か？ → 最終的な正確性・実現可能性を担保できるのは人間のレビューだから。  

---

### 【コンテキスト】
- バックログから抽出されたユーザーストーリーを対象とする。  
- 直近のスプリントで開発対象となるストーリーを優先。  
- 生成物は **自動コード生成（Devin等）やテスト自動化** の入力として直接利用されるため、具体性と完全性が必須。  

---

### 【アウトプットのフォーマット】
- 構成は以下：  
  1. ユーザーストーリー（As a / I want / So that 形式）  
  2. Business Rules  
  3. UI要素  
  4. Acceptance Criteria（Given-When-Then形式）  
  5. Architecture / Technical Notes  
  6. 未確定事項  

- なぜ重要か？ → このフォーマットに沿うことで、AIが自動生成するコードやテスト仕様に直接つなげられる。  

---

### 【入力と参考情報・資料の添付】
この部分が最も重要です。AIに正しく実装レベルの出力をさせるには、**ビジネス側の要望だけでなく、開発チームからの技術的インプットが必須**です。  

- **開発チームからの実装情報**  
  - どのフレームワークやライブラリを使うか（例: React, Spring Boot, PostgreSQL）  
  - API仕様（エンドポイント設計、認証方式）  
  - DB設計に関する前提（テーブル、カラム、制約）  
  - 外部サービスやシステムとの連携要件  
  - セキュリティやパフォーマンス上の制約  

- **Acceptance Criteria の詳細**  
  - 正常系だけでなく、異常系・例外処理も含める  
  - UIの入力検証、エラーメッセージの表示条件  
  - データ保存後の状態遷移や外部システムへの反映  
  - なぜ重要か？ → Acceptance Criteria は **テストケースの源泉** であり、これが曖昧だと自動テストも不完全になり、生成コードの品質に直結する  

**ポイント:**  
→ もし実装詳細が不足していると、AIが「汎用的すぎる」出力をするため、そのままでは使えないコードが生成されるリスクがある。  
→ 詳細な入力を与えることで、AIが **正確な設計・コードに即したストーリー** を生成できる。  

---

## 活用上の注意点
- Acceptance Criteria は必ず **Given-When-Then形式** に統一する。  
- 正常系だけでなく **異常系・例外ケース** を必ず含める。  
- 実装に必要な情報はできるだけ具体的に与える（例: 「APIで認証する」ではなく「OAuth2.0を用いたJWTトークン認証を利用する」）。  
- 不明点は「未確定事項」として明示し、POや事業部と確認する。  

---

## 活用の流れ
1. バックログから対象のユーザーストーリーを選定  
2. チームが実装に必要な情報（技術前提・UI設計・制約など）を準備  
3. AIにプロンプトを入力し、詳細化されたユーザーストーリーを生成  
4. Acceptance Criteria が網羅的か確認（正常系・異常系・例外）  
5. チームレビューで補足・修正し、**スプリント計画と実装のインプット**として利用  

---

# フィードバックについて
本ガイドやプロンプトテンプレートを活用いただき、日常の開発に取り入れてくださることに感謝します。
実際に利用してみた上での 改善提案やフィードバック がありましたら、ぜひ藤田 ウーゴ宛に直接メールでお知らせください。
いただいた内容は今後のテンプレート改善に反映し、より実践的で使いやすい形に進化させていきます。
ご意見・ご要望は以下までお寄せください。  
📧 [fujita_hug@mti.co.jp](mailto://fujita_hug@mti.co.jp)

